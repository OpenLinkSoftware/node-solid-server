<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Login</title>
  <link rel="stylesheet" href="/common/css/bootstrap.min.css">
</head>
<body>
<div class="container">
  <h4>Login</h4>
</div>
<div class="container">
  {{#if error}}
    <div class="row">
      <div class="col-md-12">
        <p class="text-danger"><strong>{{error}}</strong></p>
      </div>
    </div>
  {{/if}}
    <div class="row" id="error" style="display:none">
      <div class="col-md-12">
        <p class="text-danger"><strong id="error_msg"></strong></p>
      </div>
    </div>

  <div class="row">
  {{#if authTls}}
    <div class="col-md-5">
      {{> auth/login-auth-tls}}
    </div>
  {{else}}
    <div class="col-md-5">
      {{#if enablePassword}}
        {{> auth/login-username-password}}
      {{/if}}

      {{#if enableTls}}
        {{> auth/login-tls}}
      {{/if}}
    </div>
  {{/if}}
  </div>

</div>

<script>
  // Send return URL from localStorage to server through hidden redirect_uri field
  const returnToUrl = localStorage.getItem('returnToUrl')
  if (returnToUrl)
    for (let redirect of document.getElementsByName("redirect_uri"))
      redirect.value = returnToUrl
  localStorage.removeItem('returnToUrl')
</script>

<div class="container">
  <div class="row">
    <div class="col-md-4">
      <div>Don't have an account?
        <a class="btn btn-xs btn-default"
           href="{{{registerUrl}}}">
          Register
        </a>
      </div>
    </div>

   {{#if enablePassword}}
    <div class="col-md-6">
      <div>Forgot password?
        <a class="btn btn-xs btn-default"
           href="/account/password/reset{{#if returnToUrl}}?returnToUrl={{{returnToUrl}}}{{/if}}">
          Reset password
        </a>
      </div>
    </div>
    {{/if}}
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-md-4">
      <br/>
      Ver: {{solidVersion}}
    </div>
  </div>
</div>
</body>
</html>
